<!DOCTYPE html>
<html>
<head>
	<title>Delete Revision Id</title>
</head>
<body>
	<script type="text/javascript">
		//'use strict';
		var RevisiionArray=[]
		var RevisionIds=[]
		fetch("https://node.v-comply.com:1338/fetchContent?id=5ff6ca47ddee9900080a26d7&ngsw-bypass=true")
		.then(response => response.json())
		.then(
			json => 
			{
			console.log(json)
			console.log(typeof((json.response.desc)))
			const data=JSON.parse((json.response.desc))
			console.log(data)
			console.log(data.revisions.length)
			for(let i=0;i<data.revisions.length;i++ )
			{
				RevisiionArray[i]=data.revisions[i]. revisionId
			}
			console.log(RevisiionArray)
			data.sections[0].blocks[0].inlines[0].revisionIds=['a','b',"1xivt23qplbzhkjj9v2s5",'c','d']
			for(let i=1;i<data.sections[0].blocks.length;i++)
			{
				//console.log(data.sections[0].blocks[i])
				if(data.sections[0].blocks[i].hasOwnProperty('inlines') && data.sections[0].blocks[i].inlines.length>0 )
				{
					//console.log(i)
					//console.log(data.sections[0].blocks[i].inlines[0])
					//if(data.sections[0].blocks[i].inlines[0].hasOwnProperty('revisionIds'))
					//{
					//		console.log(data.sections[0].blocks[i].inlines[0].revisionIds)
					//}

					//RevisionIds.push(data.sections[0].blocks[i].inlines[0])
					if(data.sections[0].blocks[i].inlines[0].hasOwnProperty('revisionIds'))
					{
						for(let j=0;j<data.sections[0].blocks[i].inlines[0].revisionIds.length;j++)
						{
							RevisionIds.push(data.sections[0].blocks[i].inlines[0].revisionIds[j])
						}
						//RevisionIds.push(data.sections[0].blocks[i].inlines[0].revisionIds)
					}

				}
				/*if(data.sections[0].blocks[i].inlines[0].hasOwnProperty('revisionIds'))
				{
					RevisionIds.push()

				}
				*/
			}

			console.log(RevisionIds)

			let RevisionArrayMap=new Map()
			for(let i=0; i< RevisiionArray.length; i++) {
				RevisionArrayMap.set(RevisiionArray[i],1);	
			}

			console.log(RevisionArrayMap.entries())
				//data.sections[0].blocks[0].inlines[0].revisionIds='a

				console.log("before update")
				var indexArray=[]
				console.log(data)
				for(let i=0;i<data.sections[0].blocks.length;i++)
			{
				//console.log(data.sections[0].blocks[i])

				if(data.sections[0].blocks[i].hasOwnProperty('inlines') && data.sections[0].blocks[i].inlines.length>0 )
				{
                    
					if(data.sections[0].blocks[i].inlines[0].hasOwnProperty('revisionIds'))
					{
						console.log(data.sections[0].blocks[i].inlines[0].revisionIds)
						for(let j=0;j<data.sections[0].blocks[i].inlines[0].revisionIds.length;j++)
						{

							//console.log(data.sections[0].blocks[i].inlines[0].revisionIds[j])
							if(RevisionArrayMap.has(data.sections[0].blocks[i].inlines[0].revisionIds[j]))
							{
								//console.log(data.sections[0].blocks[i].inlines[0].revisionIds[j])
								//delete data.sections[0].blocks[0].inlines[0].revisionIds
								indexArray.push(j)

								
							}
						}
						
					}

				}
				
			}

			//using filter to update revisiion id in sections

			
			


			console.log("after update")

			console.log(data)

			console.log("indexArray")
			console.log(indexArray)


			
		}

			)
	</script>
</body>
</html>
